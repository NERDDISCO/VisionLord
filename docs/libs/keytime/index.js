!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.keytime=t()}}(function(){var _Mathmin=Math.min,_Mathabs=Math.abs,_Mathcos=Math.cos,_Mathsin=Math.sin,_MathPI=Math.PI,_Mathpow=Math.pow,_Mathsqrt=Math.sqrt,_Mathmax=Math.max;return function t(n,e,r){function o(u,s){if(!e[u]){if(!n[u]){var a="function"==typeof require&&require;if(!s&&a)return a(u,!0);if(i)return i(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var c=e[u]={exports:{}};n[u][0].call(c.exports,function(t){var e=n[u][1][t];return o(e?e:t)},c,c.exports,t,n,e,r)}return e[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(t,n){function r(t,n){for(var e=0;e<t.length;e++)if(t[e].name===n)return e;return-1}function o(t){return this instanceof o?(this.properties=[],void(t&&this.load(t))):new o(t)}var i=t("lerp-array"),u=t("./property");o.prototype.dispose=function(){this.properties.forEach(function(t){t.dispose()}),this.properties.length=0},o.prototype.addProperty=function(t){this.properties.push(new u(t))},o.prototype.duration=function(){for(var t=0,n=0;n<this.properties.length;n++)for(var e=this.properties[n],r=e.keyframes.frames,o=0;o<r.length;o++)t=_Mathmax(r[o].time,t);return t},o.prototype.property=function(t){var n="number"==typeof t?t:r(this.properties,t);return 0>n?void 0:this.properties[n]},o.prototype.load=function(t){this.dispose(),t&&(this.properties=t.map(function(t){return new u(t)}))},o.prototype.export=function(){return this.properties.map(function(t){return t.export()})},o.prototype.ease=function(t,n){return n},o.prototype.regexMultirangeParam=/([a-zA-Z]+)\(([0-9]{1,3})\)/g,o.prototype.interpolate=function(t,n,e,r){let value1=this.regexMultirangeParam.exec(n.value);if(null===value1){if("string"===typeof n.value){return n.value}}else{this.regexMultirangeParam.lastIndex=0;let value2=this.regexMultirangeParam.exec(e.value);this.regexMultirangeParam.lastIndex=0;return`${value1[1]}(${Math.round(i(parseInt(value1[2],10),parseInt(value2[2],10),r))})`}return i(n.value,e.value,r)},o.prototype.valueOf=function(t,n){var e=n.keyframes,r=e.interpolation(t),o=r[0],i=r[1],u=r[2];if(-1===o||-1===i)return n.value;var s=e.frames[o],a=e.frames[i];if(o===i)return s.value;var f=a.ease;return f&&(u=this.ease(f,u)),this.interpolate(n,s,a,u)},o.prototype.values=function(t,n){n||(n={});for(var e=0,r;e<this.properties.length;e++){r=this.properties[e];n[r.name]=this.valueOf(t,r)}return n},n.exports=o},{"./property":42,"lerp-array":39}],2:[function(t,n){function r(t){return this instanceof r?void u.call(this,t):new r(t)}var o=t("eases"),i=t("inherits"),u=t("./base");i(r,u),r.prototype.ease=function(t,n){return o[t](n)},n.exports=r},{"./base":1,eases:21,inherits:35}],3:[function(t,n){n.exports=function(t){var n=2.5949095;return 1>(t*=2)?.5*(t*t*((n+1)*t-n)):.5*((t-=2)*t*((n+1)*t+n)+2)}},{}],4:[function(t,n){n.exports=function(t){var n=1.70158;return t*t*((n+1)*t-n)}},{}],5:[function(t,n){n.exports=function(t){var n=1.70158;return--t*t*((n+1)*t+n)+1}},{}],6:[function(t,n){var o=t("./bounce-out");n.exports=function(t){return .5>t?.5*(1-o(1-2*t)):.5*o(2*t-1)+.5}},{"./bounce-out":8}],7:[function(t,n){var o=t("./bounce-out");n.exports=function(t){return 1-o(1-t)}},{"./bounce-out":8}],8:[function(t,n){function r(t){var s=t*t;return t<4/11?7.5625*s:t<8/11?9.075*s-9.9*t+3.4:t<.9?4356/361*s-35442/1805*t+16061/1805:10.8*t*t-20.52*t+10.72}n.exports=r},{}],9:[function(t,n){n.exports=function(t){return 1>(t*=2)?-.5*(_Mathsqrt(1-t*t)-1):.5*(_Mathsqrt(1-(t-=2)*t)+1)}},{}],10:[function(t,n){n.exports=function(t){return 1-_Mathsqrt(1-t*t)}},{}],11:[function(t,n){n.exports=function(t){return _Mathsqrt(1- --t*t)}},{}],12:[function(t,n){n.exports=function(t){return .5>t?4*t*t*t:.5*_Mathpow(2*t-2,3)+1}},{}],13:[function(t,n){n.exports=function(t){return t*t*t}},{}],14:[function(t,n){n.exports=function(t){var n=t-1;return n*n*n+1}},{}],15:[function(t,n){n.exports=function(t){return .5>t?.5*_Mathsin(2*(13*_MathPI/2)*t)*_Mathpow(2,10*(2*t-1)):.5*_Mathsin(-13*_MathPI/2*(2*t-1+1))*_Mathpow(2,-10*(2*t-1))+1}},{}],16:[function(t,n){n.exports=function(t){return _Mathsin(13*t*_MathPI/2)*_Mathpow(2,10*(t-1))}},{}],17:[function(t,n){n.exports=function(t){return _Mathsin(-13*(t+1)*_MathPI/2)*_Mathpow(2,-10*t)+1}},{}],18:[function(t,n){n.exports=function(t){return 0===t||1===t?t:.5>t?.5*_Mathpow(2,20*t-10):-.5*_Mathpow(2,10-20*t)+1}},{}],19:[function(t,n){n.exports=function(t){return 0===t?t:_Mathpow(2,10*(t-1))}},{}],20:[function(t,n){n.exports=function(t){return 1===t?t:1-_Mathpow(2,-10*t)}},{}],21:[function(t,n){n.exports={backInOut:t("./back-in-out"),backIn:t("./back-in"),backOut:t("./back-out"),bounceInOut:t("./bounce-in-out"),bounceIn:t("./bounce-in"),bounceOut:t("./bounce-out"),circInOut:t("./circ-in-out"),circIn:t("./circ-in"),circOut:t("./circ-out"),cubicInOut:t("./cubic-in-out"),cubicIn:t("./cubic-in"),cubicOut:t("./cubic-out"),elasticInOut:t("./elastic-in-out"),elasticIn:t("./elastic-in"),elasticOut:t("./elastic-out"),expoInOut:t("./expo-in-out"),expoIn:t("./expo-in"),expoOut:t("./expo-out"),linear:t("./linear"),quadInOut:t("./quad-in-out"),quadIn:t("./quad-in"),quadOut:t("./quad-out"),quartInOut:t("./quart-in-out"),quartIn:t("./quart-in"),quartOut:t("./quart-out"),quintInOut:t("./quint-in-out"),quintIn:t("./quint-in"),quintOut:t("./quint-out"),sineInOut:t("./sine-in-out"),sineIn:t("./sine-in"),sineOut:t("./sine-out")}},{"./back-in":4,"./back-in-out":3,"./back-out":5,"./bounce-in":7,"./bounce-in-out":6,"./bounce-out":8,"./circ-in":10,"./circ-in-out":9,"./circ-out":11,"./cubic-in":13,"./cubic-in-out":12,"./cubic-out":14,"./elastic-in":16,"./elastic-in-out":15,"./elastic-out":17,"./expo-in":19,"./expo-in-out":18,"./expo-out":20,"./linear":22,"./quad-in":24,"./quad-in-out":23,"./quad-out":25,"./quart-in":27,"./quart-in-out":26,"./quart-out":28,"./quint-in":30,"./quint-in-out":29,"./quint-out":31,"./sine-in":33,"./sine-in-out":32,"./sine-out":34}],22:[function(t,n){n.exports=function(t){return t}},{}],23:[function(t,n){n.exports=function(t){return t/=.5,1>t?.5*t*t:(t--,-.5*(t*(t-2)-1))}},{}],24:[function(t,n){n.exports=function(t){return t*t}},{}],25:[function(t,n){n.exports=function(t){return-t*(t-2)}},{}],26:[function(t,n){n.exports=function(t){return .5>t?8*_Mathpow(t,4):-8*_Mathpow(t-1,4)+1}},{}],27:[function(t,n){n.exports=function(t){return _Mathpow(t,4)}},{}],28:[function(t,n){n.exports=function(t){return _Mathpow(t-1,3)*(1-t)+1}},{}],29:[function(t,n){n.exports=function(t){return 1>(t*=2)?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},{}],30:[function(t,n){n.exports=function(t){return t*t*t*t*t}},{}],31:[function(t,n){n.exports=function(t){return--t*t*t*t*t+1}},{}],32:[function(t,n){n.exports=function(t){return-.5*(_Mathcos(_MathPI*t)-1)}},{}],33:[function(t,n){n.exports=function(t){var n=_Mathcos(.5*(t*_MathPI));return 1e-14>_Mathabs(n)?1:1-n}},{}],34:[function(t,n){n.exports=function(t){return _Mathsin(t*_MathPI/2)}},{}],35:[function(t,n){"function"==typeof Object.create?n.exports=function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:n.exports=function(t,n){t.super_=n;var e=function(){};e.prototype=n.prototype,t.prototype=new e,t.prototype.constructor=t}},{}],36:[function(t,n){function r(t,n){return t.time-n.time}function o(t,n){return this instanceof o?(this.frames=t||[],void(n||this.sort())):new o(t,n)}var i=t("lerp-array"),u=t("unlerp"),s=t("gl-vec3/set"),a=[0,0,0];o.prototype.nearestIndex=function(t,n){var _NumberMAX_VALUE=Number.MAX_VALUE;n="number"==typeof n?n:_NumberMAX_VALUE;for(var e=_NumberMAX_VALUE,r=-1,o=0,i;o<this.frames.length;o++){i=_Mathabs(this.frames[o].time-t);i<e&&i<=n&&(e=i,r=o)}return r},o.prototype.nearest=function(t,n){var e=this.nearestIndex(t,n);return-1===e?null:this.frames[e]},o.prototype.get=function(t){return this.nearest(t,0)},o.prototype.getIndex=function(t){return this.nearestIndex(t,0)},o.prototype.value=function(t,n,e){var r=this.interpolation(t);if(-1===r[0]||-1===r[1])return null;var o=this.frames[r[0]],u=this.frames[r[1]],s=r[2];return"function"==typeof n?n(o,u,s,e):i(o.value,u.value,s,e)},o.prototype.interpolation=function(t){if(0===this.frames.length)return s(a,-1,-1,0);for(var n=-1,e=this.frames.length-1;0<=e;e--)if(t>=this.frames[e].time){n=e;break}if(-1===n||n===this.frames.length-1)return 0>n&&(n=0),s(a,n,n,0);var r=this.frames[n],o=this.frames[n+1];t=_Mathmax(r.time,_Mathmin(t,o.time));var i=u(r.time,o.time,t);return s(a,n,n+1,i)},o.prototype.next=function(t){if(1>this.frames.length)return null;for(var n=-1,e=0;e<this.frames.length;e++)if(t<this.frames[e].time){n=e;break}return-1===n?null:this.frames[n]},o.prototype.previous=function(t){if(1>this.frames.length)return null;for(var n=-1,e=this.frames.length-1;0<=e;e--)if(t>this.frames[e].time){n=e;break}return-1===n?null:this.frames[n]},o.prototype.add=function(t){this.frames.push(t),this.sort()},o.prototype.splice=function(){this.frames.splice.apply(this.frames,arguments),2<arguments.length&&this.sort()},o.prototype.sort=function(){this.frames.sort(r)},o.prototype.clear=function(){this.frames.length=0},Object.defineProperty(o.prototype,"count",{get:function(){return this.frames.length}}),n.exports=o},{"gl-vec3/set":37,"lerp-array":39,unlerp:38}],37:[function(t,n){function r(t,n,e,r){return t[0]=n,t[1]=e,t[2]=r,t}n.exports=r},{}],38:[function(t,n){n.exports=function(t,n,e){return(e-t)/(n-t)}},{}],39:[function(t,n){var r=t("lerp");n.exports=function(t,n,e,o){if("number"==typeof t&&"number"==typeof n)return r(t,n,e);var i=_Mathmin(t.length,n.length);o=o||Array(i);for(var u=0;u<i;u++)o[u]=r(t[u],n[u],e);return o}},{lerp:40}],40:[function(t,n){n.exports=function(t,n,e){return t*(1-e)+n*e}},{}],41:[function(t,n){function r(){for(var t={},n=0,e;n<arguments.length;n++){e=arguments[n];for(var r in e)o.call(e,r)&&(t[r]=e[r])}return t}n.exports=r;var o=Object.prototype.hasOwnProperty},{}],42:[function(t,n){function r(t){return this instanceof r?(this.keyframes=o(),this.value=null,this.name="",void(t&&this.load(t))):new r(t)}var o=t("keyframes"),i=t("xtend");r.prototype.dispose=function(){this.keyframes.clear()},r.prototype.export=function(){return i(this,{keyframes:this.keyframes.frames})},r.prototype.load=function(t){if(this.dispose(),t)for(var n in t)t.hasOwnProperty(n)&&("keyframes"===n?this.keyframes.frames=t.keyframes:this[n]=t[n])},n.exports=r},{keyframes:36,xtend:41}]},{},[2])(2)});